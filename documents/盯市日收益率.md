# 如何计算“盯市”日收益率？

这是一个严谨的会计过程，梳理成一个可执行的步骤：

设定初始资金：在策略开始的第一天，您需要一个初始本金，比如 1,000,000 元（以数据集中数据为准）。

每日记账：从第一天开始，每天结束时（通常以收盘后为节点）做一次“日结”：

更新现金： 当日现金 = 昨日现金 - 今日买入总金额 + 今日卖出总金额 - 今日总手续费

更新持仓： 当日持仓 = 昨日持仓 + 今日买入数量 - 今日卖出数量

获取市价：您需要一个额外的数据源（Baostock），来获取您当日所有持仓股票的收盘价。

计算总资产： 当日总资产 = 当日现金 + Σ(所持每只股票数量 × 该股票当日收盘价)

每日收益的计算：必须采用“盯市”（Mark-to-Market）方法，即每日计算包括现金和所有股票持仓市值在内的总资产，并以此为基础计算当日的收益率。这虽然更复杂，但它是唯一能够真实反映您策略表现和风险状况的专业方法。